<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Riwayat Password</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
<style>
/* ======================
   Global Body & Canvas
====================== */
body{
  background:#0d0d0d;
  color:#fff;
  font-family:'Raleway',sans-serif;
  margin:0;
  padding:0;
  overflow-x:hidden;
}
#particles{
  position:fixed;
  top:0; left:0;
  width:100%; height:100%;
  z-index:0;
  pointer-events:none;
}

/* ======================
   Sticky Navbar
====================== */
.navbar{
  position:fixed;
  top:0;
  left:0;
  width:100%;
  background:rgba(13,13,13,0.95);
  backdrop-filter: blur(5px);
  display:flex;
  justify-content:center; /* center header */
  align-items:center;
  padding:15px 30px;
  box-shadow:0 0 10px #00ffff,0 0 20px #ff00ff;
  z-index:999;
}
.navbar h2{
  color:#00ffff;
  font-size:1.8em;
  margin:0;
  text-shadow:0 0 10px #00ffff,0 0 20px #ff00ff;
  animation: glitch-animation 1.5s infinite;
  position:relative;
}
.navbar h2::before,
.navbar h2::after{
  content: attr(data-text);
  position:absolute;
  left:0;
  top:0;
}

/* Glitch animation */
@keyframes glitch-animation{
  0%{transform:translate(0);}
  20%{transform:translate(-1px,1px);}
  40%{transform:translate(-1px,-1px);}
  60%{transform:translate(1px,1px);}
  80%{transform:translate(1px,-1px);}
  100%{transform:translate(0);}
}

/* ======================
   Content Wrapper
====================== */
.content{
  margin-top:90px; /* space for sticky navbar */
  display:flex;
  flex-direction:column;
  align-items:center;
  padding:20px;
}

/* ======================
   Table UI
====================== */
#historyTable{
  width:100%;
  max-width:950px;
  border-collapse:separate;
  border-spacing:0;
  border-radius:12px;
  overflow:hidden;
  background:rgba(20,20,20,0.9);
  box-shadow:0 0 20px #00ffff50, 0 0 40px #ff00ff50;
  margin-bottom:30px;
}
#historyTable th, #historyTable td{
  padding:14px 10px;
  text-align:center;
  font-size:1em;
  position:relative;
}
#historyTable th{
  background:rgba(10,10,10,0.95);
  border-bottom:2px solid #00ffff;
}
#historyTable tbody tr{
  transition:0.3s;
}
#historyTable tbody tr:hover{
  background: rgba(0,255,255,0.1);
  box-shadow: inset 0 0 10px #00ffff, inset 0 0 15px #ff00ff50;
  transform:scale(1.01);
}
#historyTable td[contenteditable="true"]{
  background: rgba(255,255,255,0.05);
  border-radius:6px;
  box-shadow: inset 0 0 5px #00ffff, inset 0 0 10px #ff00ff50;
  transition: 0.3s;
}
#historyTable td[contenteditable="true"]:focus{
  outline:none;
  background: rgba(255,255,255,0.15);
  box-shadow:0 0 10px #00ffff,0 0 20px #ff00ff, inset 0 0 10px #00ffff, inset 0 0 15px #ff00ff;
}

/* ======================
   Action Buttons inside table
====================== */
.action-btn{
  cursor:pointer;
  font-weight:bold;
  font-size:1.1em;
  margin:0 5px;
  transition:0.3s;
}
.action-btn.edit{color:#00ffff;}
.action-btn.edit:hover{color:#ff00ff; transform:scale(1.2);}
.action-btn.delete{color:#ff00ff;}
.action-btn.delete:hover{color:#ff66ff; transform:scale(1.2);}

/* ======================
   Bottom Buttons
====================== */
.button-container{
  display:flex;
  justify-content:center;
  gap:20px;
  flex-wrap:wrap;
  margin-bottom:40px;
}
.button{
  padding:12px 28px;
  border:none;
  border-radius:20px;
  cursor:pointer;
  text-transform:uppercase;
  font-weight:700;
  background:#00ffff;
  color:#0d0d0d;
  font-size:1em;
  box-shadow:0 0 15px #00ffff,0 0 25px #ff00ff;
  transition:0.3s;
}
.button:hover{
  background:#ff00ff;
  color:#fff;
  box-shadow:0 0 25px #00ffff,0 0 40px #ff00ff;
}

/* ======================
   Toast Notification
====================== */
.toast{
  position:fixed;
  top:20px;
  left:50%;
  transform:translateX(-50%) translateY(-50px);
  background:#00ffff;
  color:#0d0d0d;
  padding:14px 28px;
  border-radius:12px;
  font-weight:700;
  text-align:center;
  opacity:0;
  pointer-events:none;
  box-shadow:0 0 15px #00ffff,0 0 30px #ff00ff;
  transition:all 0.5s ease;
  z-index:1000;
}
.toast.show{
  opacity:1;
  transform:translateX(-50%) translateY(0);
}

/* ======================
   Responsive
====================== */
@media(max-width:768px){
  .navbar h2{font-size:1.4em;}
  .button{padding:10px 20px;font-size:0.9em;}
  #historyTable th,#historyTable td{font-size:0.85em;padding:8px;}
}
</style>
</head>
<body>

<canvas id="particles"></canvas>

<!-- ======================
     Sticky Navbar
====================== -->
<div class="navbar">
  <h2 data-text="Riwayat Password">Riwayat Password</h2>
</div>

<div class="content">
  <table id="historyTable">
    <thead>
      <tr>
        <th>No</th>
        <th>Username</th>
        <th>Password</th>
        <th>Timestamp</th>
        <th>Aksi</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>

  <!-- Bottom Buttons -->
  <div class="button-container">
    <button class="button" id="deleteAll"><i class="fas fa-trash-alt"></i> Hapus Semua Password</button>
    <button class="button" id="backLogin"><i class="fas fa-arrow-left"></i> Kembali ke Login</button>
  </div>
</div>

<!-- Toast Notification -->
<div class="toast" id="toastHistory"></div>

<script>
// Partikel Neon
const canvas = document.getElementById("particles");
const ctx = canvas.getContext("2d");
let particles = [];
const colors = ["#00ffff","#ff00ff","#00ff00","#ffae00","#00aaff"];
function resizeCanvas(){ canvas.width=window.innerWidth; canvas.height=window.innerHeight; }
window.addEventListener("resize",resizeCanvas);
resizeCanvas();
for(let i=0;i<120;i++){
  particles.push({
    x:Math.random()*canvas.width,
    y:Math.random()*canvas.height,
    size:Math.random()*2+1,
    speedX:(Math.random()-0.5)*0.7,
    speedY:(Math.random()-0.5)*0.7,
    color:colors[Math.floor(Math.random()*colors.length)]
  });
}
function animate(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  particles.forEach(p=>{
    ctx.beginPath();
    ctx.arc(p.x,p.y,p.size,0,Math.PI*2);
    ctx.fillStyle=p.color;
    ctx.shadowBlur=10;
    ctx.shadowColor=p.color;
    ctx.fill();
    p.x+=p.speedX;
    p.y+=p.speedY;
    if(p.x<0||p.x>canvas.width)p.speedX*=-1;
    if(p.y<0||p.y>canvas.height)p.speedY*=-1;
  });
  requestAnimationFrame(animate);
}
animate();

// Toast helper
function showToast(message){
  const toast=document.getElementById("toastHistory");
  toast.textContent=message;
  toast.classList.add("show");
  setTimeout(()=>toast.classList.remove("show"),1500);
}

// Load History
function loadHistory(){
  const tbody=document.querySelector("#historyTable tbody");
  tbody.innerHTML="";
  const history=JSON.parse(localStorage.getItem("passwordHistory"))||[];
  history.forEach((item,index)=>{
    const tr=document.createElement("tr");
    tr.innerHTML=`
      <td>${index+1}</td>
      <td>${item.username}</td>
      <td>${item.password}</td>
      <td>${item.timestamp}</td>
      <td>
        <span class="action-btn edit" onclick="editEntry(${index})"><i class="fas fa-edit"></i></span>
        <span class="action-btn delete" onclick="deleteEntry(${index})"><i class="fas fa-trash-alt"></i></span>
      </td>`;
    tbody.appendChild(tr);
  });
}

// Delete entry
function deleteEntry(idx){
  if(confirm("Yakin ingin menghapus password ini?")){
    let history=JSON.parse(localStorage.getItem("passwordHistory"))||[];
    history.splice(idx,1);
    localStorage.setItem("passwordHistory",JSON.stringify(history));
    loadHistory();
    showToast("Password dihapus!");
  }
}

// Edit entry
function editEntry(idx){
  const tbody=document.querySelector("#historyTable tbody");
  const row=tbody.children[idx];

  row.children[1].setAttribute("contenteditable","true");
  row.children[2].setAttribute("contenteditable","true");
  row.children[1].focus();

  const editBtn=row.querySelector(".edit i");
  editBtn.className="fas fa-check";
  row.querySelector(".edit").onclick=function(){
    let history=JSON.parse(localStorage.getItem("passwordHistory"))||[];
    history[idx].username=row.children[1].textContent;
    history[idx].password=row.children[2].textContent;
    localStorage.setItem("passwordHistory",JSON.stringify(history));

    row.children[1].removeAttribute("contenteditable");
    row.children[2].removeAttribute("contenteditable");

    editBtn.className="fas fa-edit";
    row.querySelector(".edit").onclick=function(){ editEntry(idx); }

    showToast("Edit berhasil!");
  };
}

// Hapus semua password
document.getElementById("deleteAll").addEventListener("click",()=>{
  if(confirm("Yakin hapus semua password?")){
    localStorage.removeItem("passwordHistory");
    loadHistory();
    showToast("Semua password dihapus!");
  }
});

// Kembali ke login
document.getElementById("backLogin").addEventListener("click",()=>{
  window.location.href="login.html";
});

loadHistory();
</script>

</body>
</html>
